# Ark Blueprints

æœªå®Œã®éƒ¨å“ã‚’ä¸€ã¤ãšã¤é›†ã‚ã€ã„ã¤ã‹èˆªæµ·ã«å‡ºã‚‹ç®±èˆŸã‚’å½¢ã«ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚â›µ

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Ark Blueprints ã¯ã€ãƒœãƒ¼ãƒˆãƒ¬ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ **åé›† â†’ å‰å‡¦ç† â†’ ç‰¹å¾´é‡ç”Ÿæˆ â†’ æ©Ÿæ¢°å­¦ç¿’ â†’ æ¨è«–** ã¾ã§è¡Œã†ã“ã¨ã‚’ç›®æŒ‡ã™é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚  
ç¾åœ¨ã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ãŒå®Œæˆã—ã¦ã„ã¾ã™ï¼š

* ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿åé›†ï¼ˆãƒ¬ãƒ¼ã‚¹æƒ…å ±ãƒ»ã‚ªãƒƒã‚ºï¼‰
* æ—¥æ¬¡ CSV ç”Ÿæˆï¼ˆraw + refundï¼‰
* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ç”Ÿæˆï¼ˆæœªç¢ºå®šãƒ¬ãƒ¼ã‚¹ã®ç· åˆ‡äºˆå®šæ™‚åˆ»ã‚’å–å¾—ï¼‰
* ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã«ã‚ˆã‚‹ç›´å‰ã‚ªãƒƒã‚ºåé›†ï¼ˆæº–å„ªãƒ»å„ªå‹æˆ¦ï¼‰
* å‰å‡¦ç†ï¼ˆæ¬ æå€¤å‡¦ç†ãƒ»å‹å¤‰æ›ãƒ»å¤±æ ¼ãƒ¬ãƒ¼ã‚¹é™¤å¤–ãƒ»ST/STå±•ç¤ºå¤‰æ›ï¼‰
* ç‰¹å¾´é‡ç”Ÿæˆï¼ˆæ•°å€¤/ã‚«ãƒ†ã‚´ãƒªåˆ—ã®é¸å®šã€OneHot + æ¨™æº–åŒ–ï¼‰
* LightGBM ã«ã‚ˆã‚‹åˆå›å­¦ç¿’ãƒ»ãƒ¢ãƒ‡ãƒ«ä¿å­˜

---

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```text
ark-blueprints/
â”‚
â”œâ”€ data/                         # ãƒ‡ãƒ¼ã‚¿æ ¼ç´ï¼ˆ.gitignore æ¨å¥¨ï¼‰
â”‚   â”œâ”€ html/                     # ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å–å¾—HTML
â”‚   â”‚   â”œâ”€ odds3t/               # 3é€£å˜ã‚ªãƒƒã‚ºHTML
â”‚   â”‚   â”œâ”€ odds2tf/              # 2é€£å˜ãƒ»2é€£è¤‡ã‚ªãƒƒã‚ºHTML
â”‚   â”‚   â”œâ”€ pay/                  # æ‰•æˆ»ãƒšãƒ¼ã‚¸HTML
â”‚   â”‚   â””â”€ raceresult/           # ãƒ¬ãƒ¼ã‚¹çµæœãƒšãƒ¼ã‚¸HTML
â”‚   â”œâ”€ raw/                      # æ—¥æ¬¡ãƒ¬ãƒ¼ã‚¹CSVï¼ˆ64åˆ—: 63 + section_idï¼‰
â”‚   â”œâ”€ refund/                   # æ‰•æˆ»é‡‘CSV
â”‚   â”œâ”€ timeline/                 # ç›´å‰ã‚ªãƒƒã‚ºã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³CSV
â”‚   â””â”€ processed/                # å‰å‡¦ç†ãƒ»ç‰¹å¾´é‡ãƒ»ãƒ©ãƒ™ãƒ«ç­‰ã®æˆæœç‰©
â”‚       â”œâ”€ master.csv            # å…¨ãƒ¬ãƒ¼ã‚¹çµ±åˆï¼ˆåŸºç¤ï¼‰
â”‚       â”œâ”€ X_base.npz / y.csv    # baseãƒ¢ãƒ‡ãƒ«ç”¨ã®ç‰¹å¾´é‡ãƒ»ãƒ©ãƒ™ãƒ«
â”‚       â”œâ”€ X_top2pair_dense.npz  # top2pairãƒ¢ãƒ‡ãƒ«ç”¨ã®ç‰¹å¾´é‡
â”‚       â”œâ”€ y_top2pair.csv
â”‚       â””â”€ ids_top2pair.csv
â”‚
â”œâ”€ logs/
â”‚
â”œâ”€ notebooks/
â”‚   â”œâ”€ preprocess.ipynb          # å‰å‡¦ç†ãƒ•ãƒ­ãƒ¼æ¤œè¨¼
â”‚   â””â”€ features.ipynb            # ç‰¹å¾´é‡æ¤œè¨¼
â”‚
â”œâ”€ scripts/
â”‚   â”œâ”€ scrape.py
â”‚   â”œâ”€ build_raw_csv.py
â”‚   â”œâ”€ build_timeline_live.py
â”‚   â”œâ”€ run_odds_scheduler.py
â”‚   â”œâ”€ scrape_odds.py
â”‚   â”œâ”€ build_feature_pipeline.py # baseãƒ¢ãƒ‡ãƒ«ç”¨ å‰å‡¦ç†å™¨ç”Ÿæˆ
â”‚   â”œâ”€ train.py                  # baseãƒ¢ãƒ‡ãƒ«å­¦ç¿’ï¼ˆruns / latest æ›´æ–°ï¼‰
â”‚   â”œâ”€ build_live_row.py         # æ¨è«–ç”¨ãƒ©ã‚¤ãƒ–è¡Œç”Ÿæˆ
â”‚   â”œâ”€ predict_one_race.py       # å˜ç™ºæ¨è«–ï¼ˆbaseãƒ¢ãƒ‡ãƒ«ï¼‰
â”‚   â”œâ”€ build_top2pair_dataset.py # top2pairç”¨ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç”Ÿæˆ
â”‚   â”œâ”€ train_top2pair.py         # top2pairãƒ¢ãƒ‡ãƒ«å­¦ç¿’
â”‚   â””â”€ predict_top2pair.py       # top2pairãƒ¢ãƒ‡ãƒ«æ¨è«–
â”‚
â”œâ”€ src/
â”‚   â”œâ”€ __init__.py
â”‚   â”œâ”€ data_loader.py
â”‚   â”œâ”€ feature_engineering.py
â”‚   â”œâ”€ model.py
â”‚   â”œâ”€ model_utils.py            # å…±é€š: ä¿å­˜ãƒ»ãƒ­ãƒ¼ãƒ‰ãƒ»IDç”Ÿæˆ
â”‚   â””â”€ utils.py
â”‚
â”œâ”€ models/
â”‚   â”œâ”€ base/                     # baseãƒ¢ãƒ‡ãƒ«ç³»
â”‚   â”‚   â”œâ”€ latest/
â”‚   â”‚   â”‚   â”œâ”€ model.pkl
â”‚   â”‚   â”‚   â”œâ”€ feature_pipeline.pkl
â”‚   â”‚   â”‚   â””â”€ train_meta.json
â”‚   â”‚   â””â”€ runs/
â”‚   â”‚       â””â”€ <model_id>/       # ä¾‹: 20250913_141256
â”‚   â”‚           â”œâ”€ model.pkl
â”‚   â”‚           â”œâ”€ feature_pipeline.pkl
â”‚   â”‚           â””â”€ train_meta.json
â”‚   â”‚
â”‚   â””â”€ top2pair/                 # top2ãƒšã‚¢æ–¹å¼ãƒ¢ãƒ‡ãƒ«
â”‚       â”œâ”€ latest/
â”‚       â”‚   â”œâ”€ model.pkl
â”‚       â”‚   â””â”€ train_meta.json
â”‚       â””â”€ runs/
â”‚           â””â”€ <model_id>/
â”‚               â”œâ”€ model.pkl
â”‚               â”œâ”€ train_meta.json
â”‚               â”œâ”€ feature_importance.csv
â”‚               â””â”€ cv_folds.csv
â”‚
â”œâ”€ docs/
â”‚   â”œâ”€ data_dictionary.md
â”‚   â””â”€ design_notes.md
â”‚
â”œâ”€ tests/
â”‚
â”œâ”€ requirements.txt
â”œâ”€ README.md
â””â”€ .gitignore
```





